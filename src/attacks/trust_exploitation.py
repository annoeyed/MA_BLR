"""
협력적 백도어 (Cooperative Backdoor) : 두 단계 교차 인증 후 악성 행위
"""
from src.core.agent_base import MultiAgentBase, MessageType, AgentMessage
import asyncio, time, uuid, random

class CoopAgent(MultiAgentBase):
    async def on_heartbeat(self,m): pass
    async def on_query(self,m): pass
    async def on_response(self,m): pass
    async def on_trigger(self,m):
        if m.content.get("step") == 1:
            await self.send(m.sender_id, MessageType.TRIGGER, {"step":2})
        elif m.content.get("step") == 2:
            await self.broadcast(MessageType.BACKDOOR, {"action":"coop_backdoor"})
    async def on_backdoor(self,m): print(self.agent_id,"co-op backdoor!!")
    async def on_broadcast(self,m): pass
